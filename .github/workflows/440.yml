name: 440 Clone and Push

on:
  schedule:
    - cron: '0 4 * * *' # Runs every week
  workflow_dispatch:



jobs:
  build:
    runs-on: ubuntu-latest
    continue-on-error: true
    strategy:
      max-parallel: 5
      matrix:
        repo_name: ['platform/external/bluetooth/bluez', 'platform/external/bluetooth/glib', 'platform/external/bluetooth/hcidump', 'platform/external/bluez', 'platform/external/boost', 'platform/external/boringssl', 'platform/external/bouncycastle', 'platform/external/bpftool', 'platform/external/brotli', 'platform/external/bsdiff', 'platform/external/bvb', 'platform/external/bzip2', 'platform/external/c-ares', 'platform/external/caliper', 'platform/external/capstone', 'platform/external/catch2', 'platform/external/cblas', 'platform/external/cbor-java', 'platform/external/ceres-solver', 'platform/external/checkpolicy', 'platform/external/checkstyle', 'platform/external/cherry', 'platform/external/chromite', 'platform/external/chromium', 'platform/external/chromium-libpac', 'platform/external/chromium-trace', 'platform/external/chromium-webview', 'platform/external/chromium_org', 'platform/external/chromium_org/sdch/open-vcdiff', 'platform/external/chromium_org/testing/gtest', 'platform/external/chromium_org/third_party/WebKit', 'platform/external/chromium_org/third_party/angle', 'platform/external/chromium_org/third_party/angle_dx11', 'platform/external/chromium_org/third_party/boringssl/src', 'platform/external/chromium_org/third_party/brotli/src', 'platform/external/chromium_org/third_party/eyesfree/src/android/java/src/com/googlecode/eyesfree/braille', 'platform/external/chromium_org/third_party/freetype', 'platform/external/chromium_org/third_party/icu', 'platform/external/chromium_org/third_party/leveldatabase/src', 'platform/external/chromium_org/third_party/libaddressinput/src', 'platform/external/chromium_org/third_party/libjingle/source/talk', 'platform/external/chromium_org/third_party/libjpeg_turbo', 'platform/external/chromium_org/third_party/libphonenumber/src/phonenumbers', 'platform/external/chromium_org/third_party/libphonenumber/src/resources', 'platform/external/chromium_org/third_party/libsrtp', 'platform/external/chromium_org/third_party/libvpx', 'platform/external/chromium_org/third_party/libyuv', 'platform/external/chromium_org/third_party/mesa/src', 'platform/external/chromium_org/third_party/openmax_dl', 'platform/external/chromium_org/third_party/openssl', 'platform/external/chromium_org/third_party/opus/src', 'platform/external/chromium_org/third_party/ots', 'platform/external/chromium_org/third_party/sfntly/cpp/src', 'platform/external/chromium_org/third_party/skia', 'platform/external/chromium_org/third_party/skia/gyp', 'platform/external/chromium_org/third_party/skia/include', 'platform/external/chromium_org/third_party/skia/src', 'platform/external/chromium_org/third_party/smhasher/src', 'platform/external/chromium_org/third_party/usrsctp/usrsctplib', 'platform/external/chromium_org/third_party/webrtc', 'platform/external/chromium_org/third_party/yasm/source/patched-yasm', 'platform/external/chromium_org/tools/grit', 'platform/external/chromium_org/tools/gyp', 'platform/external/chromium_org/v8', 'platform/external/cibu-fonts', 'platform/external/clang', 'platform/external/clang-tools-extra', 'platform/external/clang_35a', 'platform/external/cldr', 'platform/external/clearsilver', 'platform/external/cmake', 'platform/external/cmockery', 'platform/external/cn-cbor', 'platform/external/codesourcery', 'platform/external/collada', 'platform/external/compiler-rt', 'platform/external/compiler-rt_35a', 'platform/external/connectedappssdk', 'platform/external/conscrypt', 'platform/external/cpu_features', 'platform/external/cpuinfo', 'platform/external/crcalc', 'platform/external/cronet', 'platform/external/cros/system_api', 'platform/external/crosvm', 'platform/external/cryptsetup', 'platform/external/curl', 'platform/external/dagger2', 'platform/external/dbus', 'platform/external/dbus-binding-generator', 'platform/external/deqp', 'platform/external/deqp-deps/SPIRV-Headers', 'platform/external/deqp-deps/SPIRV-Tools', 'platform/external/deqp-deps/amber', 'platform/external/deqp-deps/glslang', 'platform/external/desugar', 'platform/external/devlib', 'platform/external/dexmaker', 'platform/external/dhcpcd', 'platform/external/dhcpcd-6.8.2', 'platform/external/dlmalloc', 'platform/external/dng_sdk', 'platform/external/dnsmasq', 'platform/external/doclava', 'platform/external/dokka', 'platform/external/donuts', 'platform/external/dosfstools', 'platform/external/double-conversion', 'platform/external/downloader', 'platform/external/doxygen']

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Git clone
        run: git clone --mirror https://android.googlesource.com/${{ matrix.repo_name }} ${{ matrix.repo_name }}

      - name: Push
        run: |
          cd ${{ matrix.repo_name }}
          git config --global user.email "you@example.com"
          git config --global user.name "Your Name"
          git push --mirror https://${{ secrets.GitUsername }}:${{ secrets.GitToken }}@${{ secrets.GitURL }}/${{ matrix.repo_name }}.git
