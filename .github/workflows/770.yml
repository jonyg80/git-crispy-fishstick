name: 770 Clone and Push

on:
  schedule:
    - cron: '0 7 * * *' # Runs every week
  workflow_dispatch:



jobs:
  build:
    runs-on: ubuntu-latest
    continue-on-error: true
    strategy:
      max-parallel: 5
      matrix:
        repo_name: ['platform/external/libchrome-gestures', 'platform/external/libchromeos', 'platform/external/libchromeos-rs', 'platform/external/libconfig', 'platform/external/libconstrainedcrypto', 'platform/external/libcppbor', 'platform/external/libcups', 'platform/external/libcxx', 'platform/external/libcxx_35a', 'platform/external/libcxxabi', 'platform/external/libcxxabi_35a', 'platform/external/libcxxrt', 'platform/external/libdaemon', 'platform/external/libdivsufsort', 'platform/external/libdrm', 'platform/external/libedit', 'platform/external/libepoxy', 'platform/external/libese', 'platform/external/libevent', 'platform/external/libexif', 'platform/external/libffi', 'platform/external/libfuse', 'platform/external/libgav1', 'platform/external/libgdx', 'platform/external/libgsm', 'platform/external/libhevc', 'platform/external/libiio', 'platform/external/libiota', 'platform/external/libjpeg-turbo', 'platform/external/libkmsxx', 'platform/external/liblc3', 'platform/external/libldac', 'platform/external/liblzf', 'platform/external/libmicrohttpd', 'platform/external/libmojo', 'platform/external/libmonet', 'platform/external/libmpeg2', 'platform/external/libmtp', 'platform/external/libnetfilter_conntrack', 'platform/external/libnfc-nci', 'platform/external/libnfc-nxp', 'platform/external/libnfnetlink', 'platform/external/libnl', 'platform/external/libnl-headers', 'platform/external/libogg', 'platform/external/libopus', 'platform/external/libpalmrejection', 'platform/external/libpcap', 'platform/external/libpciaccess', 'platform/external/libphonenumber', 'platform/external/libpng', 'platform/external/libppp', 'platform/external/libprotobuf-mutator', 'platform/external/libseccomp-helper', 'platform/external/libselinux', 'platform/external/libsepol', 'platform/external/libsrtp2', 'platform/external/libssh2', 'platform/external/libtextclassifier', 'platform/external/libtraceevent', 'platform/external/libtracefs', 'platform/external/libunwind', 'platform/external/libunwind_llvm', 'platform/external/liburing', 'platform/external/libusb', 'platform/external/libusb-compat', 'platform/external/libusb_aah', 'platform/external/libutf', 'platform/external/libuv', 'platform/external/libvncserver', 'platform/external/libvorbis', 'platform/external/libvpx', 'platform/external/libvterm', 'platform/external/libweave', 'platform/external/libwebm', 'platform/external/libwebsockets', 'platform/external/libxaac', 'platform/external/libxcam', 'platform/external/libxkbcommon', 'platform/external/libxml2', 'platform/external/libxslt', 'platform/external/libyuv', 'platform/external/licenseclassifier', 'platform/external/linux-kselftest', 'platform/external/linux-tools-perf', 'platform/external/lisa', 'platform/external/littlemock', 'platform/external/lld', 'platform/external/lldb', 'platform/external/lldb-utils', 'platform/external/llvm', 'platform/external/llvm_35a', 'platform/external/lmfit', 'platform/external/login-items-ae', 'platform/external/lohit-fonts', 'platform/external/lottie', 'platform/external/ltp', 'platform/external/ltrace', 'platform/external/lua', 'platform/external/lvm2', 'platform/external/lz4', 'platform/external/lzma', 'platform/external/lzop', 'platform/external/marisa-trie', 'platform/external/markdown', 'platform/external/mbedtls', 'platform/external/mdnsresponder', 'platform/external/mesa3d', 'platform/external/messageformat', 'platform/external/mime-support']

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Git clone
        run: git clone --mirror https://android.googlesource.com/${{ matrix.repo_name }} ${{ matrix.repo_name }}

      - name: Push
        run: |
          cd ${{ matrix.repo_name }}
          git config --global user.email "you@example.com"
          git config --global user.name "Your Name"
          git push --mirror https://${{ secrets.GitUsername }}:${{ secrets.GitToken }}@${{ secrets.GitURL }}/${{ matrix.repo_name }}.git
