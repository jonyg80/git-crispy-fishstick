name: 660 Clone and Push

on:
  schedule:
    - cron: '0 6 * * *' # Runs every week
  workflow_dispatch:



jobs:
  build:
    runs-on: ubuntu-latest
    continue-on-error: true
    strategy:
      matrix:
        repo_name: ['platform/external/googleapis-gax-go', 'platform/external/googleapis-go-genproto', 'platform/external/googleclient', 'platform/external/googletest', 'platform/external/gptfdisk', 'platform/external/gradle-perf-android-large', 'platform/external/gradle-perf-android-medium', 'platform/external/grpc-grpc', 'platform/external/grpc-grpc-go', 'platform/external/grpc-grpc-java', 'platform/external/grub', 'platform/external/gsoap', 'platform/external/gson', 'platform/external/gtest', 'platform/external/guava', 'platform/external/guice', 'platform/external/gvdb', 'platform/external/gwp_asan', 'platform/external/hamcrest', 'platform/external/harfbuzz', 'platform/external/harfbuzz_ng', 'platform/external/hcidump', 'platform/external/honggfuzz', 'platform/external/hsqldb', 'platform/external/hyphenation', 'platform/external/hyphenation-patterns', 'platform/external/icing', 'platform/external/icu', 'platform/external/icu4c', 'platform/external/id3lib', 'platform/external/igt-gpu-tools', 'platform/external/image_io', 'platform/external/ims', 'platform/external/ink-stroke-modeler', 'platform/external/iosched', 'platform/external/iperf3', 'platform/external/iproute2', 'platform/external/ipsec-tools', 'platform/external/iptables', 'platform/external/iputils', 'platform/external/iw', 'platform/external/jack', 'platform/external/jackson-annotations', 'platform/external/jackson-core', 'platform/external/jackson-databind', 'platform/external/jacoco', 'platform/external/jarjar', 'platform/external/javaparser', 'platform/external/javapoet', 'platform/external/javasqlite', 'platform/external/javassist', 'platform/external/jazzer-api', 'platform/external/jcommander', 'platform/external/jdiff', 'platform/external/jemalloc', 'platform/external/jemalloc_new', 'platform/external/jenkins-hash', 'platform/external/jetbrains/JetBrainsRuntime', 'platform/external/jetbrains/intellij-kotlin', 'platform/external/jetbrains/intellij-rust', 'platform/external/jetbrains/jcef', 'platform/external/jetbrains/jdk8u', 'platform/external/jetbrains/jdk8u_corba', 'platform/external/jetbrains/jdk8u_hotspot', 'platform/external/jetbrains/jdk8u_jaxp', 'platform/external/jetbrains/jdk8u_jaxws', 'platform/external/jetbrains/jdk8u_jdk', 'platform/external/jetbrains/jdk8u_jfx', 'platform/external/jetbrains/jdk8u_langtools', 'platform/external/jetbrains/jdk8u_nashorn', 'platform/external/jetbrains/kotlin', 'platform/external/jetty', 'platform/external/jhead', 'platform/external/jimfs', 'platform/external/jline', 'platform/external/jmdns', 'platform/external/jmonkeyengine', 'platform/external/jpeg', 'platform/external/jsilver', 'platform/external/jsmn', 'platform/external/jsoncpp', 'platform/external/jsr305', 'platform/external/jsr330', 'platform/external/junit', 'platform/external/junit-params', 'platform/external/kernel-headers', 'platform/external/kmod', 'platform/external/kotlinc', 'platform/external/kotlinpoet', 'platform/external/kotlinx.atomicfu', 'platform/external/kotlinx.coroutines', 'platform/external/kotlinx.metadata', 'platform/external/ksoap2', 'platform/external/ksp', 'platform/external/ktfmt', 'platform/external/ktlint', 'platform/external/kythe', 'platform/external/lame', 'platform/external/lcc', 'platform/external/leveldb', 'platform/external/libabigail', 'platform/external/libaom', 'platform/external/libavc', 'platform/external/libbackup', 'platform/external/libbpf', 'platform/external/libbrillo', 'platform/external/libc-test', 'platform/external/libcap', 'platform/external/libcap-ng', 'platform/external/libchrome']

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Git clone
      run: git clone --mirror https://android.googlesource.com/${{ matrix.repo_name }} ${{ matrix.repo_name }}

    - name: Push
      run: |
        cd ${{ matrix.repo_name }}
        git config --global user.email "you@example.com"
        git config --global user.name "Your Name"
        git push --mirror https://${{ secrets.GitUsername }}:${{ secrets.GitToken }}@${{ secrets.GitURL }}/${{ matrix.repo_name }}.git